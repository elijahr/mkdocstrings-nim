{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#mkdocstrings-nim","title":"mkdocstrings-nim","text":"<p>A mkdocstrings handler for Nim.</p> <p>Parses Nim source files using the Nim compiler's AST to extract module docstrings, procedure signatures, parameter types, return types, and <code>{.raises.}</code> pragma annotations. Renders the extracted documentation as HTML within MkDocs using the <code>module</code> directive syntax.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Automatic extraction - Parses Nim source files using the Nim compiler's AST</li> <li>Docstring support - RST-style docstrings with parameter and return documentation</li> <li>Pragma extraction - Shows <code>{.raises.}</code> and other pragmas in docs</li> <li>Material theme - Full support for mkdocs-material theme</li> <li>Versioned docs - Works with mike for versioned documentation</li> </ul>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Python 3.9+</li> <li>Nim compiler (must be in PATH)</li> <li>MkDocs with mkdocstrings</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"<p>Given <code>src/math_utils.nim</code>:</p> <pre><code>## Math utilities module.\n\nproc add*(a, b: int): int =\n  ## Add two integers.\n  ##\n  ## :param a: First operand\n  ## :param b: Second operand\n  ## :returns: Sum of a and b\n  result = a + b\n</code></pre> <p>Reference it in your markdown:</p> <pre><code>::: math_utils\n</code></pre> <p>The handler generates formatted documentation with:</p> <ul> <li>Module description</li> <li>Function signatures</li> <li>Parameter types and descriptions</li> <li>Return type and description</li> <li>Source line references</li> </ul>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started - Installation and basic setup</li> <li>Configuration - All available options</li> <li>Writing Docstrings - Docstring format reference</li> <li>CI Integration - GitHub Actions workflows</li> </ul>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#changelog","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#unreleased","title":"[Unreleased]","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li><code>show_private</code> option to include non-exported (private) symbols in documentation</li> <li><code>show_attribution</code> option with \"Generated with mkdocstrings-nim\" footer (enabled by default)</li> <li><code>source_url</code> and <code>source_ref</code> options for clickable source links to GitHub/GitLab</li> <li>Auto-detection of <code>source_ref</code> from current git branch</li> <li>Configuration validation with warnings for malformed <code>source_url</code></li> <li><code>exported</code> field tracking for Nim symbols (detects <code>*</code> export marker)</li> <li>Documentation for source links, private symbols, and all handler options</li> </ul>"},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>Cache now invalidates when source files are modified (fixes live reload with <code>mkdocs serve</code>)</li> <li>Documented objects now appear in right-side TOC using mkdocstrings heading filter</li> <li>Handler options from <code>mkdocs.yml</code> are now properly applied</li> </ul>"},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>Live reload now works correctly when Nim source files change</li> <li>TOC integration: documented procs/types now appear in table of contents</li> <li>Config options cascade correctly: defaults &lt; config &lt; directive options</li> </ul>"},{"location":"changelog/#testing","title":"Testing","text":"<ul> <li>Expanded test suite from 25 to 45 tests (87% coverage)</li> <li>Added tests for config validation, git branch detection, and error handling</li> <li>Added tests for collector edge cases (JSON extraction, module parsing)</li> <li>Added tests for docstring edge cases (empty, malformed, multi-paragraph)</li> </ul>"},{"location":"changelog/#010-2025-11-30","title":"[0.1.0] - 2025-11-30","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li>Initial release</li> <li>Nim source file parsing using compiler AST</li> <li>Docstring style support: RST, Google, NumPy, Epydoc, and Auto detection</li> <li>Parameter and return value documentation</li> <li>Raises pragma extraction and display</li> <li>Material theme templates</li> <li>Markdown rendering in docstrings</li> <li>Compile-time caching of Nim extractor binary</li> <li>Module, proc, func, iterator, template, macro, type, and const support</li> <li>CI integration with GitHub Actions</li> <li>Comprehensive test suite (24 tests)</li> </ul>"},{"location":"ci/","title":"CI Integration","text":""},{"location":"ci/#ci-integration","title":"CI Integration","text":""},{"location":"ci/#github-actions","title":"GitHub Actions","text":"<p>Example workflow for building and deploying docs:</p> <pre><code>name: docs\n\non:\n  push:\n    branches: [main]\n  pull_request:\n\njobs:\n  docs:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-python@v5\n        with:\n          python-version: '3.12'\n\n      - uses: iffy/install-nim@v5\n        with:\n          version: binary:stable\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n      - name: Install compiler modules\n        run: nimble install compiler -y\n\n      - name: Install dependencies\n        run: pip install mkdocs mkdocstrings-nim mkdocs-material\n\n      - name: Build docs\n        run: mkdocs build\n\n      - name: Deploy to GitHub Pages\n        if: github.event_name == 'push' &amp;&amp; github.ref == 'refs/heads/main'\n        uses: peaceiris/actions-gh-pages@v4\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./site\n</code></pre>"},{"location":"ci/#versioned-documentation-with-mike","title":"Versioned Documentation with Mike","text":"<p>For versioned docs using mike:</p> <pre><code>name: docs\n\non:\n  push:\n    branches: [main]\n    tags: ['v*']\n\njobs:\n  docs:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n\n      - uses: actions/setup-python@v5\n        with:\n          python-version: '3.12'\n\n      - uses: iffy/install-nim@v5\n        with:\n          version: binary:stable\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n\n      - name: Install compiler modules\n        run: nimble install compiler -y\n\n      - name: Install dependencies\n        run: pip install mkdocs mkdocstrings-nim mkdocs-material mike\n\n      - name: Configure git\n        run: |\n          git config user.name \"github-actions[bot]\"\n          git config user.email \"github-actions[bot]@users.noreply.github.com\"\n\n      - name: Deploy dev docs\n        if: github.ref == 'refs/heads/main'\n        run: |\n          mike deploy --push dev\n          mike set-default --push dev\n\n      - name: Deploy versioned docs\n        if: startsWith(github.ref, 'refs/tags/v')\n        run: |\n          VERSION=${GITHUB_REF#refs/tags/v}\n          mike deploy --push --update-aliases $VERSION latest\n          mike set-default --push latest\n</code></pre>"},{"location":"ci/#requirements","title":"Requirements","text":"<p>CI environments need:</p> <ol> <li>Python 3.9+ - For mkdocstrings-nim</li> <li>Nim compiler - Use <code>iffy/install-nim@v5</code> with <code>version: binary:stable</code> for fast binary installation</li> <li>Compiler modules - Run <code>nimble install compiler -y</code> to install Nim's compiler API modules needed for AST parsing</li> <li>Dependencies - Install via pip or a requirements file</li> </ol> <p>Example <code>docs-requirements.txt</code>:</p> <pre><code>mkdocs&gt;=1.5\nmkdocstrings-nim&gt;=0.1.0\nmkdocs-material&gt;=9.0\nmike&gt;=2.0\n</code></pre>"},{"location":"configuration/","title":"Configuration","text":""},{"location":"configuration/#configuration","title":"Configuration","text":""},{"location":"configuration/#handler-options","title":"Handler Options","text":"<p>Configure the Nim handler in <code>mkdocs.yml</code>:</p> <pre><code>plugins:\n  - mkdocstrings:\n      default_handler: nim\n      handlers:\n        nim:\n          paths: [src]\n          options:\n            docstring_style: rst\n            show_source: true\n            show_signature: true\n            show_pragmas: true\n            show_private: false\n            heading_level: 2\n            source_url: https://github.com/owner/repo\n            source_ref: main\n</code></pre>"},{"location":"configuration/#options-reference","title":"Options Reference","text":"Option Type Default Description <code>paths</code> list <code>[\"src\"]</code> Directories to search for Nim source files <code>docstring_style</code> string <code>\"rst\"</code> Docstring format: <code>rst</code>, <code>google</code>, <code>numpy</code>, <code>epydoc</code>, or <code>auto</code> <code>show_source</code> bool <code>true</code> Show source file and line number for each entry <code>show_signature</code> bool <code>true</code> Show full procedure signatures <code>show_pragmas</code> bool <code>true</code> Show pragma annotations <code>show_private</code> bool <code>false</code> Show non-exported (private) symbols <code>show_attribution</code> bool <code>true</code> Show \"Generated with mkdocstrings-nim\" footer <code>heading_level</code> int <code>2</code> Starting HTML heading level <code>source_url</code> string <code>null</code> Base URL for source links (e.g., <code>https://github.com/owner/repo</code>) <code>source_ref</code> string auto-detected Git branch or tag for source links (auto-detected from git if not set)"},{"location":"configuration/#per-object-options","title":"Per-Object Options","text":"<p>Override options for specific objects:</p> <pre><code>::: mymodule\n    options:\n      show_source: false\n      heading_level: 3\n</code></pre>"},{"location":"configuration/#multiple-source-paths","title":"Multiple Source Paths","text":"<p>Search multiple directories:</p> <pre><code>handlers:\n  nim:\n    paths:\n      - src\n      - lib\n      - vendor/nimble\n</code></pre>"},{"location":"configuration/#source-links","title":"Source Links","text":"<p>Enable clickable links to source code on GitHub or GitLab:</p> <pre><code>handlers:\n  nim:\n    paths: [src]\n    options:\n      show_source: true\n      source_url: https://github.com/owner/repo\n      # source_ref auto-detected from git branch\n</code></pre> <p>When <code>source_url</code> is set, the source location becomes a link to the file on GitHub/GitLab.</p> <ul> <li><code>source_ref</code> is auto-detected from your current git branch if not set</li> <li>Override with a tag (e.g., <code>v1.0.0</code>) for versioned release documentation</li> <li>The handler warns if <code>source_url</code> format appears incorrect</li> </ul>"},{"location":"configuration/#private-symbols","title":"Private Symbols","text":"<p>By default, only exported symbols (marked with <code>*</code> in Nim) are documented. To include private symbols:</p> <pre><code>handlers:\n  nim:\n    paths: [src]\n    options:\n      show_private: true\n</code></pre> <p>Override per-module to show private symbols for internal documentation:</p> <pre><code>::: mymodule.internal\n    options:\n      show_private: true\n</code></pre>"},{"location":"configuration/#docstring-styles","title":"Docstring Styles","text":""},{"location":"configuration/#rst-default","title":"RST (default)","text":"<pre><code>proc example*(x: int): string =\n  ## Brief description.\n  ##\n  ## :param x: Parameter description\n  ## :returns: Return value description\n  ## :raises ValueError: When x is negative\n</code></pre>"},{"location":"configuration/#google","title":"Google","text":"<pre><code>proc example*(x: int): string =\n  ## Brief description.\n  ##\n  ## Args:\n  ##   x: Parameter description\n  ##\n  ## Returns:\n  ##   Return value description\n  ##\n  ## Raises:\n  ##   ValueError: When x is negative\n</code></pre>"},{"location":"configuration/#numpy","title":"NumPy","text":"<pre><code>proc example*(x: int): string =\n  ## Brief description.\n  ##\n  ## Parameters\n  ## ----------\n  ## x : int\n  ##     Parameter description\n  ##\n  ## Returns\n  ## -------\n  ## string\n  ##     Return value description\n</code></pre>"},{"location":"configuration/#identifier-syntax","title":"Identifier Syntax","text":"<p>Reference modules and nested paths:</p> <pre><code>&lt;!-- Module --&gt;\n::: mymodule\n\n&lt;!-- Nested module --&gt;\n::: mypackage.submodule\n\n&lt;!-- Specific item (planned) --&gt;\n::: mymodule.MyType\n</code></pre>"},{"location":"configuration/#theme-support","title":"Theme Support","text":"<p>The handler includes templates for the Material theme. Other themes use fallback templates.</p> <p>For custom templates, set:</p> <pre><code>handlers:\n  nim:\n    custom_templates: path/to/templates\n</code></pre>"},{"location":"docstrings/","title":"Writing Docstrings","text":""},{"location":"docstrings/#writing-docstrings","title":"Writing Docstrings","text":""},{"location":"docstrings/#basic-format","title":"Basic Format","text":"<p>Nim docstrings use <code>##</code> comments:</p> <pre><code>proc greet*(name: string): string =\n  ## Single line description.\n  result = \"Hello, \" &amp; name\n</code></pre> <p>Multi-line descriptions:</p> <pre><code>proc process*(data: seq[int]): seq[int] =\n  ## Process a sequence of integers.\n  ##\n  ## This function filters, transforms, and returns\n  ## the processed data. Empty sequences return empty.\n  result = data.filterIt(it &gt; 0)\n</code></pre>"},{"location":"docstrings/#module-docstrings","title":"Module Docstrings","text":"<p>Document modules at the top of the file:</p> <pre><code>## mymodule - Utilities for data processing.\n##\n## This module provides functions for filtering,\n## transforming, and aggregating data sequences.\n\nimport std/sequtils\n\nproc filter*[T](data: seq[T]): seq[T] =\n  ## Filter the sequence.\n  discard\n</code></pre>"},{"location":"docstrings/#parameters","title":"Parameters","text":"<p>Document parameters with <code>:param</code>:</p> <pre><code>proc connect*(host: string; port: int; timeout: float = 30.0): Connection =\n  ## Connect to a remote server.\n  ##\n  ## :param host: Server hostname or IP address\n  ## :param port: Port number (1-65535)\n  ## :param timeout: Connection timeout in seconds\n  result = newConnection(host, port, timeout)\n</code></pre>"},{"location":"docstrings/#return-values","title":"Return Values","text":"<p>Document return values with <code>:returns</code>:</p> <pre><code>proc calculate*(x, y: int): tuple[sum: int, product: int] =\n  ## Calculate sum and product.\n  ##\n  ## :param x: First operand\n  ## :param y: Second operand\n  ## :returns: Tuple containing sum and product\n  result = (sum: x + y, product: x * y)\n</code></pre>"},{"location":"docstrings/#exceptions","title":"Exceptions","text":"<p>Document raised exceptions with <code>:raises</code>:</p> <pre><code>proc divide*(a, b: int): int =\n  ## Divide two integers.\n  ##\n  ## :param a: Dividend\n  ## :param b: Divisor\n  ## :returns: Quotient\n  ## :raises DivByZeroDefect: When b is zero\n  if b == 0:\n    raise newException(DivByZeroDefect, \"division by zero\")\n  result = a div b\n</code></pre>"},{"location":"docstrings/#pragmas","title":"Pragmas","text":"<p>The handler extracts pragmas automatically:</p> <pre><code>proc riskyOp*() {.raises: [IOError, ValueError].} =\n  ## Operation that may fail.\n  ##\n  ## See Raises section for possible exceptions.\n  discard\n</code></pre> <p>This displays a Raises section listing <code>IOError</code> and <code>ValueError</code>.</p>"},{"location":"docstrings/#types","title":"Types","text":"<p>Document types and their fields:</p> <pre><code>type\n  Config* = object\n    ## Application configuration.\n    host*: string    ## Server hostname\n    port*: int       ## Server port\n    debug*: bool     ## Enable debug mode\n</code></pre>"},{"location":"docstrings/#constants","title":"Constants","text":"<pre><code>const\n  Version* = \"1.0.0\"\n    ## Current library version.\n\n  MaxConnections* = 100\n    ## Maximum concurrent connections.\n</code></pre>"},{"location":"docstrings/#code-examples","title":"Code Examples","text":"<p>Include code examples in docstrings:</p> <pre><code>proc factorial*(n: int): int =\n  ## Calculate factorial of n.\n  ##\n  ## :param n: Non-negative integer\n  ## :returns: n!\n  ##\n  ## Example:\n  ##\n  ## ```nim\n  ## assert factorial(5) == 120\n  ## assert factorial(0) == 1\n  ## ```\n  if n &lt;= 1: 1\n  else: n * factorial(n - 1)\n</code></pre>"},{"location":"docstrings/#docstring-styles","title":"Docstring Styles","text":"<p>The <code>docstring_style</code> option controls how structured sections (parameters, returns, raises) are parsed:</p> <ul> <li>RST (default) - Uses <code>:param:</code>, <code>:returns:</code>, <code>:raises:</code> directives</li> <li>Google - Uses <code>Args:</code>, <code>Returns:</code>, <code>Raises:</code> sections</li> <li>NumPy - Uses section headers with underlines (<code>Parameters</code>, <code>Returns</code>, etc.)</li> <li>Epydoc - Uses <code>@param</code>, <code>@return</code>, <code>@raise</code> tags</li> <li>Auto - Automatically detects the style</li> </ul> <p>Set the style in your <code>mkdocs.yml</code>:</p> <pre><code>handlers:\n  nim:\n    options:\n      docstring_style: google  # or \"rst\", \"numpy\", \"epydoc\", \"auto\"\n</code></pre> <p>See Configuration for examples of each style.</p>"},{"location":"docstrings/#markdown-content-important","title":"Markdown Content (Important)","text":"<p>While the <code>docstring_style</code> controls how structured sections are parsed, all prose content is rendered as Markdown. This is the same approach used by mkdocstrings-python.</p> <p>Use Markdown formatting in your docstrings:</p> <pre><code>proc format*(text: string): string =\n  ## Format text with **bold** and *italic*.\n  ##\n  ## Supports:\n  ##\n  ## - Bullet lists\n  ## - `inline code`\n  ## - [links](https://example.com)\n  ##\n  ## &gt; Blockquotes work too.\n  ##\n  ## Code blocks use fences:\n  ##\n  ## ```nim\n  ## let x = format(\"hello\")\n  ## ```\n  result = text\n</code></pre>"},{"location":"docstrings/#what-works","title":"What Works","text":"Syntax Example Bold <code>**bold**</code> Italic <code>*italic*</code> Code <code>`code`</code> Links <code>[text](url)</code> Lists <code>- item</code> or <code>1. item</code> Headings <code>## Heading</code> Code blocks <code>```nim ... ```</code> Blockquotes <code>&gt; quote</code>"},{"location":"docstrings/#what-does-not-work","title":"What Does NOT Work","text":"<p>RST-specific formatting is not supported for prose content:</p> <pre><code># DON'T do this:\nproc example*() =\n  ## Example::            &lt;-- RST code block syntax won't work\n  ##\n  ##   indented code      &lt;-- Will render as plain text\n  ##\n  ## See :ref:`other`     &lt;-- RST cross-references won't work\n</code></pre> <p>Instead, use Markdown:</p> <pre><code># DO this:\nproc example*() =\n  ## Example:\n  ##\n  ## ```nim\n  ## code here\n  ## ```\n  ##\n  ## See [other](other.md)\n</code></pre>"},{"location":"docstrings/#summary","title":"Summary","text":"Aspect Format Structured sections (<code>:param:</code>, <code>Args:</code>) Determined by <code>docstring_style</code> Prose content (descriptions, examples) Markdown"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#getting-started","title":"Getting Started","text":""},{"location":"getting-started/#installation","title":"Installation","text":"<pre><code>pip install mkdocstrings-nim\n</code></pre> <p>Ensure the Nim compiler is installed and available in your PATH:</p> <pre><code>nim --version\n</code></pre> <p>If not installed, see nim-lang.org/install.</p>"},{"location":"getting-started/#basic-setup","title":"Basic Setup","text":""},{"location":"getting-started/#1-configure-mkdocs","title":"1. Configure MkDocs","text":"<p>Add mkdocstrings with the Nim handler to your <code>mkdocs.yml</code>:</p> <pre><code>plugins:\n  - search\n  - mkdocstrings:\n      default_handler: nim\n      handlers:\n        nim:\n          paths: [src]\n          options:\n            heading_level: 3  # Recommended for TOC integration\n</code></pre> <p>For the right-side table of contents to include API items, also configure:</p> <pre><code>markdown_extensions:\n  - toc:\n      permalink: true\n      toc_depth: 4  # Include h2, h3, h4 in TOC\n</code></pre>"},{"location":"getting-started/#2-write-documented-nim-code","title":"2. Write Documented Nim Code","text":"<p>Create a Nim module with docstrings:</p> <pre><code>## mylib.nim - A sample library.\n\ntype\n  Config* = object\n    ## Configuration settings.\n    name*: string\n    debug*: bool\n\nproc init*(cfg: Config): bool =\n  ## Initialize the library.\n  ##\n  ## :param cfg: Configuration to use\n  ## :returns: True if successful\n  result = true\n</code></pre>"},{"location":"getting-started/#3-reference-in-markdown","title":"3. Reference in Markdown","text":"<p>Create <code>docs/api.md</code>:</p> <pre><code># API Reference\n\n::: mylib\n</code></pre>"},{"location":"getting-started/#4-build","title":"4. Build","text":"<pre><code>mkdocs serve   # Development server\nmkdocs build   # Production build\n</code></pre>"},{"location":"getting-started/#5-enable-hot-reload-for-source-files","title":"5. Enable Hot Reload for Source Files","text":"<p>By default, <code>mkdocs serve</code> only watches the <code>docs/</code> directory. To reload when Nim source files change, add <code>watch</code> to your <code>mkdocs.yml</code>:</p> <pre><code>watch:\n  - docs\n  - src  # Reload when Nim source files change\n</code></pre>"},{"location":"getting-started/#project-structure","title":"Project Structure","text":"<p>Recommended layout:</p> <pre><code>myproject/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 mylib.nim\n\u251c\u2500\u2500 docs/\n\u2502   \u251c\u2500\u2500 index.md\n\u2502   \u2514\u2500\u2500 api.md\n\u251c\u2500\u2500 mkdocs.yml\n\u2514\u2500\u2500 mylib.nimble\n</code></pre>"},{"location":"getting-started/#first-build","title":"First Build","text":"<p>The first documentation build compiles the Nim extractor tool (~15 seconds). Subsequent builds use the cached binary and are fast.</p>"},{"location":"getting-started/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/#nim-compiler-not-found","title":"\"Nim compiler not found\"","text":"<p>Ensure <code>nim</code> is in your PATH:</p> <pre><code>which nim\n</code></pre>"},{"location":"getting-started/#could-not-find-nim-file","title":"\"Could not find Nim file\"","text":"<p>Check that <code>paths</code> in your handler config points to your source directory:</p> <pre><code>handlers:\n  nim:\n    paths: [src]  # Adjust to match your layout\n</code></pre>"},{"location":"getting-started/#slow-first-build","title":"Slow first build","text":"<p>Normal. The Nim extractor compiles on first use. The binary is cached in <code>/tmp/mkdocstrings-nim-cache/</code>.</p>"}]}